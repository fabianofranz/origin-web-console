<div class="service-group">
  <div row tablet="column" class="service-group-header"
       ng-if="service.metadata.labels.app || displayRoute"
       ng-click="toggleCollapse()">
    <div ng-if="appName" class="app-name">
      <i class="fa fa-angle-down fa-fw" aria-hidden="true" ng-if="!collapse"></i>
      <i class="fa fa-angle-right fa-fw" aria-hidden="true" ng-if="collapse"></i>
      {{appName | startCase}}
    </div>
    <h4 class="route-title truncate">
      <span ng-if="appName">
        <i class="fa fa-external-link mar-right-sm small" aria-hidden="true"></i>
      </span>
      <span ng-if="!appName">
        <i class="fa fa-angle-down fa-fw" aria-hidden="true" ng-if="!collapse"></i>
        <i class="fa fa-angle-right fa-fw" aria-hidden="true" ng-if="collapse"></i>
      </span>
      <a ng-if="displayRoute | isWebRoute"
         ng-href="{{displayRoute | routeWebURL}}">{{displayRoute | routeLabel}}</a>
      <span ng-if="!(displayRoute | isWebRoute)">{{displayRoute | routeLabel}}</span>
        <span ng-if="routeWarnings && routes.length === 1">
          <route-warnings warnings="routeWarnings"></route-warnings>
        </span>
      </span>
    </h4>
  </div>
  <!-- <div ng-if="displayRoute" class="service-group-header"> -->
  <!--   <div class="pull-right text-muted"> -->
  <!--     Route: -->
  <!--     <a ng-href="{{displayRoute | navigateResourceURL}}">{{displayRoute.metadata.name}}</a> -->
  <!--   </div> -->
  <!--   <h2 class="route-title truncate"> -->
  <!--     <a ng-if="displayRoute | isWebRoute" -->
  <!--        ng-href="{{displayRoute | routeWebURL}}">{{displayRoute | routeLabel}}</a> -->
  <!--     <span ng-if="!(displayRoute | isWebRoute)">{{displayRoute | routeLabel}}</span> -->
  <!--       <span ng-if="routeWarnings && routes.length === 1"> -->
  <!--         <route-warnings warnings="routeWarnings"></route-warnings> -->
  <!--       </span> -->
  <!--     </span> -->
  <!--   </h2> -->
  <!--   <div ng-if="routeWarnings && routes.length > 1" class="small text-muted"> -->
  <!--     <span class="pficon pficon-warning-triangle-o" aria-hidden="true"></span> -->
  <!--     This service has <a ng-href="project/{{service.metadata.namespace}}/browse/routes">routes</a> with warnings. -->
  <!--   </div> -->
  <!-- </div> -->
  <div>
    <div ng-repeat="dc in deploymentConfigsByService[service.metadata.name]">
      <div row ng-repeat="pipeline in recentPipelinesByDc[dc.metadata.name] | orderObjectsByDate : true track by (pipeline | uid)"
           class="animate-repeat">
        <build-pipeline flex build="pipeline" overview="true"></build-pipeline>
      </div>
    </div>
    <div uib-collapse="collapse" class="service-group-body">
      <div row mobile="column" class="overview-services">
        <overview-service
            column
            grow="1"
            service="service"
            deployment-configs="deploymentConfigsByService[service.metadata.name]"
            deployments="deploymentsByService[service.metadata.name]"
            recent-pipelines="recentPipelines"
            pipelines-by-deployment="pipelinesByDeployment"
            pods-by-deployment="podsByDeployment",
            hpa-by-dc="hpaByDc"
            hpa-by-rc="hpaByRc"
            scalable-deployment-by-config="scalableDeploymentByConfig"
            monopods="monopodsByService[service.metadata.name]">
        </overview-service>
        <overview-service
            ng-repeat="child in childServices"
            column
            grow="1"
            service="child"
            deployment-configs="deploymentConfigsByService[child.metadata.name]"
            deployments="deploymentsByService[child.metadata.name]"
            recent-pipelines="recentPipelines"
            pipelines-by-deployment="pipelinesByDeployment"
            pods-by-deployment="podsByDeployment"
            class="child-service"
            hpa-by-dc="hpaByDc"
            hpa-by-rc="hpaByRc"
            scalable-deployment-by-config="scalableDeploymentByConfig"
            monopods="monopodsByService[service.metadata.name]">
        </overview-service>
      </div>
      <service-group-notifications
          deployment-configs-by-service="deploymentConfigsByService"
          deployments-by-service="deploymentsByService"
          child-services="childServices"
          service="service"
          pods-by-deployment="podsByDeployment">
      </service-group-notifications>
    </div>
  </div>
</div>

<div ng-if="!(deployments | hashSize)" class="pad-md">
  There are no deployments for this service.
</div>
<!-- FIXME: ng-if is not exactly right, need to understand how to show dep status -->
<div ng-repeat="deployment in deployments | orderObjectsByDate : true track by (deployment | uid)"
     ng-if="isDeploymentVisible(deployment)"
     ng-init="dcName = (deployment | annotation : 'deploymentConfig')"
     class="deployment-tile">
  <div row class="service-title">
    <div>
      Service:
      <a ng-href="{{service | navigateResourceURL}}">{{service.metadata.name}}</a>
    </div>
    <!-- <div class="text-muted"> -->
    <!--   <span data-icon="î€²" aria-hidden="true" style="font-size:16px; vertical-align: middle;"></span> -->
    <!--   <span ng-if="service.spec.ports.length === 1"> -->
    <!--     {{service.spec.ports[0].port}} -->
    <!--   </span> -->
    <!--   <span ng-if="service.spec.ports.length > 1"> -->
    <!--     {{service.spec.ports.length}} ports -->
    <!--   </span> -->
    <!-- </div> -->
    <div>
      <relative-timestamp timestamp="deployment.metadata.creationTimestamp"></relative-timestamp>
    </div>
  </div>
  <div class="deployment-header">
    <div column flex class="shield" ng-if="dcName">
      <div row class="shield-number">
        <a ng-if="dcName" ng-href="{{deployment | navigateResourceURL}}">#{{deployment | annotation: 'deploymentVersion'}}</a>
      </div>
    </div>
  </div>
  <div row ng-if="!dcName" class="rc-name">
    <a ng-href="{{deployment | navigateResourceURL}}">{{deployment.metadata.name}}</a>
  </div>
  <div row class="deployment-body">
    <div column class="overview-donut">
      <deployment-donut
          rc="deployment"
          deployment-config="deploymentConfigs[(deployment | annotation : 'deploymentConfig')]"
          pods="podsByDeployment[deployment.metadata.name]"
          hpa="getHPA(deployment.metadata.name, (deployment | annotation : 'deploymentConfig'))"
          limit-ranges="limitRanges"
          scalable="isScalableDeployment(deployment, deploymentConfigs, hpaByDc, hpaByRc, scalableDeploymentByConfig)"
          alerts="alerts">
      </deployment-donut>
    </div>
    <div column class="overview-metrics">
      <metrics deployment="deployment" profile="compact"></metrics>
    </div>
  </div>
</div>
